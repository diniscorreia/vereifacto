function getSelectionText(){var t="";return window.getSelection?t=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(t=document.selection.createRange().text),t}function getVal(t){var e=t.attr("class").split(" ")[0],o=e.substr(e.lastIndexOf("-")+1);return o}chrome.runtime.sendMessage({from:"content",subject:"showPageAction"}),chrome.runtime.onMessage.addListener(function(t,e,o){if("popup"===t.from&&"DOMInfo"===t.subject){var n={selection:getSelectionText()};o(n)}});var iconFont=document.createElement("style");iconFont.type="text/css",iconFont.textContent='@font-face { font-family: verifacto; src: url("'+chrome.extension.getURL("icons/verifacto.woff?v=4.0.3")+'"); }',document.head.appendChild(iconFont),$(function(){var t=[],e,o=[];$.getJSON("//verifacto.net/?json=1&post_type=quote&include=id,url,custom_fields&custom_fields=quote_text",function(n){e=n,$.each(n.posts,function(e,o){t.push(o.custom_fields.quote_text[0])}),$.each(t,function(t,e){$("body").highlight(e,{className:"pblc-vf__quote--index-"+t+" pblc-vf__quote pblc-vf"})}),$("body").find("span.pblc-vf__quote").each(function(t,e){var c=$(this),s=getVal(c),a=n.posts[s].id,i=0,r="";c.attr("data-quote-id",s),o.push(a),$.getJSON("//verifacto.net/?json=meta/get_posts_by_meta_query&quoteid="+a+"&include=id,custom_fields&custom_fields=fact_check_score,fact_check_link",function(t){var e=t.posts.length,o=0,n=0,s="";$.each(t.posts,function(t,e){var n=document.createElement("a");n.href=e.custom_fields.fact_check_link[0],o+=parseInt(e.custom_fields.fact_check_score[0]),s+='<img title="'+n.hostname+'" alt="'+n.hostname+'" src="https://www.google.com/s2/favicons?domain='+n.hostname+'">'}),n=o/e,5==n?(i=5,r="True"):n>=4?(i=4,r="Mostly true"):n>=3?(i=3,r="Controversial"):n>=2?(i=2,r="Mostly false"):1==n&&(i=1,r="False"),c.addClass("pblc-vf__quote--score"+i).attr("data-factchecks-label",r).attr("data-factchecks-count",e).on("click",function(t){t.stopPropagation(),window.open("https://verifacto.net/?p="+a)}).append('<a target="_blank" href="https://verifacto.net/?p='+a+'"></a>'),c.webuiPopover({content:function(t){var o="";return o+='<span class="pblc-vf__popover__title score'+i+'">'+r+"</span>",o+='<span class="pblc-vf__popover__context">'+e+" fact-checks contribute to this score.</span>",o+='<span class="pblc-vf__popover__icons">'+s+"</span>",o+='<span class="pblc-vf__popover__note">Click to know more</span>'},title:"Verifacto",trigger:"hover",container:c})})})})});